## 数据库优化

### 概述

开始学习时，主要关注软件层面的优化，高级的优化规则和准则，然后利用利用时间来测试性能，当你成为高级工程师时，应该关注cpu与I/O复用的问题

#### 软件层面优化关注的问题

+ 表结构设计是否合理？ 特别是，相关列是否设置了合适的类型，每个表是否有适合运作的相关列．比如，更新速度快的表通常有很多包含少量列的表，然而那些分析大量数据的应用却只有一些包含大量列的表．

+ 是否设置了让查询有效的合理的索引？
+ 是否选择了为每个表选择了合适存储引擎，并且利用了所选择引擎的优点？
+ 每个表是否有合适的行格式？这个选项是根据表所用的存储引擎来决定的，特别是，压缩的表使用更少的磁盘空间，所以I/O读取速度会更快一些，压缩可用与InnoDB所有负载，以及MyISAM只读表
+ 应用是否选择了合适锁策略？比如，如果允许共享数据，那么数据库操作可以并发执行，如果需要排他操作，那么一些严格的数据操作可以获得最高优先级．所以，存储引擎的选择很有用，Innodb 引擎自己处理大部分锁的问题，从而用户无需更多操作，允许更好在数据库端的并发，减少测试和调整代码．
+ 是否所有缓存大小设置正确了?　意思是，足够大以便快速的访问数据，但是也不是超出负载并且造成分页的大小．内存区域配置主要是InnoDB的缓存池和MyISAM中key　cache


#### 硬件层面优化

+ Disk seeks. 从磁盘中寻找某片数据是耗时的．这个时间在现代磁盘上，通常小于10ms，也就是说，理论上我们可以每秒做100次查询，这个时间很难改善，也很难对于单个表做优化．最好的办法就是把数据分布到更多磁盘上去．
+ Disk reading and wirting. 我们需要从磁盘中读取和写入数据，现在磁盘美妙可以写入10-20MB/s数据，这个比上面的disk seeks更好优化，因为你可以并行从数据库读．
+ CPU cycles. 当数据在内存时，我们必须处理它获得我们需要的结果．与大表相比，内存使用量是更普遍的限制因素．但是对于小表来说，速度通常不是问题．
+　Memory bandwidth. 当cpu中数据超过cpu　可用　cache时，带宽将成为问题．这是一个不太普遍的问题，但是应该对它警觉．

### 优化SQL语句
